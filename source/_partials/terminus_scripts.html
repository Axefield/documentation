<script src="/docs/assets/js/node_modules/angular/angular.min.js"></script>
<script src="/docs/assets/js/node_modules/angular-md/dist/angular-md.js"></script>
<script src="/docs/assets/js/node_modules/marked/lib/marked.js"></script>
<script src="/docs/assets/js/node_modules/angular-material/angular-material.min.js"></script>
<script src="/docs/assets/js/node_modules/angular-animate/angular-animate.min.js"></script>
<script src="/docs/assets/js/node_modules/angular-aria/angular-aria.min.js"></script>
{% if page.terminuspage %}

<script type="text/javascript">
function setActivetrail() {
  aaObj = document.getElementById('manual-toc').getElementsByTagName('a');
  for(i=0;i<aaObj.length;i++) {
    if(document.location.href.indexOf(aaObj[i].href)>=0 ){
      aaObj[i].className='active-trail';
      if(/\/install.*/.test(aaObj[i].href)>=1) {
        $('#docs-terminus').removeClass('active-trail');
      }
      if(/\/examples.*/.test(aaObj[i].href)>=1) {
        $('#docs-terminus').removeClass('active-trail');
      }
      if(/\/commands.*/.test(aaObj[i].href)>=1) {
        $('#docs-terminus').removeClass('active-trail');
      }
      if(/\/releases.*/.test(aaObj[i].href)>=1) {
        $('#docs-terminus').removeClass('active-trail');
      }
      if(/\/plugins.*/.test(aaObj[i].href)>=1) {
        $('#docs-terminus').removeClass('active-trail');
      }
      if(/\/directory.*/.test(aaObj[i].href)>=1) {
        $('#docs-terminus-plugins').removeClass('active-trail');
      }
      if(/\/create.*/.test(aaObj[i].href)>=1) {
        $('#docs-terminus-plugins').removeClass('active-trail');
      }
      if(/\/updates.*/.test(aaObj[i].href)>=1) {
        $('#docs-terminus').removeClass('active-trail');
      }
    }
  }
}
window.addEventListener("load", setActivetrail);
</script>
{% endif %}

<script>
var terminusCompareApp = angular.module('terminusCompareApp', ['ngMaterial']);
var terminusLatestRelease = angular.module("terminusLatestReleaseApp", ['yaru22.md']);
terminusLatestRelease.config(function($interpolateProvider) {
  $interpolateProvider.startSymbol('{[{');
  $interpolateProvider.endSymbol('}]}');
});

terminusLatestRelease.controller("terminusLatestReleaseCtrl", function($scope, $http) {
    $scope.latestRelease = {};
    $http.get('/docs/assets/terminus/releases/latest.json')
      .then(function (response) {
        var data = response.data;
        $scope.latestRelease = data;
    });
});

var terminusRelease = angular.module('terminusReleaseApp', ['yaru22.md']);
terminusRelease.config(function($interpolateProvider) {
  $interpolateProvider.startSymbol('{[{');
  $interpolateProvider.endSymbol('}]}');
});

terminusRelease.controller('terminusReleaseCtrl', function($scope, $http) {
  $scope.releases = [];
  $http.get('/docs/assets/terminus/releases.json')
    .then(function (response) {
      var data = response.data;
      $scope.releases = data;
      $scope.greaterThan = function(prop, val){
          return function(item){
            return item[prop] > val;
          }
      }

  });
  }
);
angular.bootstrap(document.getElementById("terminusRelease"), ['terminusReleaseApp']);


var terminusCommandsApp = angular.module('terminusCommandsApp', ['ngMaterial']);


terminusCommandsApp.config(function($interpolateProvider) {
  $interpolateProvider.startSymbol('{[{');
  $interpolateProvider.endSymbol('}]}');
});

terminusCommandsApp.controller('mainController', function($scope, $http) {
  $scope.searchCommand   = '';
  $scope.terminus = [];
  $http.get('/docs/assets/terminus/commands.json')
    .then(function (response) {
      var data = response.data;

      var old = JSON.stringify(data).replace(/(<site_env>)/g, "<site>.<env>").replace(/(<site_env_id>)/g, "<site>.<env>").replace(/(<site_id>)/g, "<site>").replace(/(<site_name>)/g, "<site>").replace(/(\[<drush_command>\]\.\.\.)/g, "-- <drush_command>\\n\\nThe double-dash (--) signifies the end of the Terminus options. Everything that comes after the double-dash is interpreted as positional parameters (arguments) and passed to Drush.").replace(/(\[<wp_command>\]\.\.\.)/g, "-- <wp_command>\\n\\nThe double-dash (--) signifies the end of the Terminus options. Everything that comes after the double-dash is interpreted as positional parameters (arguments) and passed to WP-CLI.");
      var newArray = JSON.parse(old);
      $scope.terminus = newArray;

  });
  $scope.clearFilters = function(){
      $scope.searchCommand =  undefined;
  };
});

//Sort usage array by relevance based on Regex matches from search query
terminusCommandsApp.filter('search', function() {
  return function (items, str) {
    if(str == '') return items;
    var filtered = [];
    var rgx = new RegExp(str, 'gi');

    angular.forEach(items, function(item) {
      item.points = (JSON.stringify(item).match(rgx) || []).length;
      filtered.push(item);
    });
  return filtered;
}
});


terminusCompareApp.config(function($interpolateProvider) {
  $interpolateProvider.startSymbol('{[{');
  $interpolateProvider.endSymbol('}]}');
});

terminusCompareApp.controller('mainController', function($scope, $http) {
  $scope.searchCommand   = '';
  $scope.terminus = [];
  $http.get('/docs/assets/terminus/compare.json')
    .then(function (response) {
      var data = response.data;
      $scope.terminus = data;
    });
  $scope.clearFilters = function(){
      $scope.searchCommand =  undefined;
  };
});
//Sort usage array by relevance based on Regex matches from search query
terminusCompareApp.filter('search', function() {
  return function (items, str) {
    if(str == '') return items;
    var filtered = [];
    var rgx = new RegExp(str, 'gi');

    angular.forEach(items, function(item) {
      item.points = (JSON.stringify(item).match(rgx) || []).length;
      filtered.push(item);
    });
  return filtered;
}
});


</script>
